name: java-build_N_deploy-pipeline

pool:
  name: Default
  demands:
  - Agent.Name -equals lenovo_windows

trigger: none

stages:
  - stage: applicationBuild
    displayName: Application Build and Package Artifacts
    jobs:
      - job: javaSetup
        displayName: Java Environment
        steps:
          - task: JavaToolInstaller@1
            displayName: Java Install
            inputs:
              versionSpec: '21.0.9'
              jdkArchitectureOption: 'x86'
              jdkSourceOption: 'PreInstalled'

      - job: mavenBuild
        displayName: Build with Maven
        dependsOn: javaSetup
        steps:
          - task: Maven@3
            displayName: Maven Clean Package
            inputs:
              mavenPomFile: 'frontend/pom.xml'
              javaHomeOption: 'JDKVersion'
              jdkVersionOption: '1.17'
              jdkArchitectureOption: 'x64'
              goals: 'clean package'
